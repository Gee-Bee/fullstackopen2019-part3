(window.webpackJsonpphonebook=window.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),u=t.n(o),c=t(2),i=t(3),l=t.n(i),s="/api/persons",m=function(){return l.a.get(s).then(function(e){return e.data})},f=function(e){return l.a.post(s,e).then(function(e){return e.data})},d=function(e,n){return l.a.put("".concat(s,"/").concat(e),n).then(function(e){return e.data})},p=function(e){return l.a.delete("".concat(s,"/").concat(e))},v=function(e){var n=e.value,t=e.setValue;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:function(e){return t(e.target.value)}}))},b=function(e){var n=e.persons,t=e.setPersons,a=e.newName,o=e.setNewName,u=e.newNumber,c=e.setNewNumber,i=e.setNotification,l=function(){o(""),c("")},s=function(e,n){var t={message:e};n&&(t.type=n),i(t),setTimeout(function(){return i(null)},5e3)};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var o=n.find(function(e){return e.name===a}),c={name:a,number:u};if(o){var i="".concat(a," is already added to phonebook, replace to old number with a new one?");window.confirm(i)&&d(o.id,c).then(function(e){t(n.map(function(n){return n.id===e.id?e:n})),l(),s("Changed number for ".concat(c.name))})}else f(c).then(function(e){t(n.concat(e)),l(),s("Added ".concat(c.name))}).catch(function(e){var n=e.response&&e.response.data.error;n&&s(n.map(function(e){return r.a.createElement("div",{key:e},e)}),"error")})}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:a,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:u,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},h=function(e){var n=e.person,t=e.deletePerson;return r.a.createElement("div",null,n.name," ",n.number,r.a.createElement("button",{onClick:t},"delete"))},w=function(e){var n=e.persons,t=e.setPersons,a=e.filterValue,o=e.setNotification,u=n.filter(function(e){return e.name.toLocaleLowerCase().includes(a.toLocaleLowerCase())}),c=function(e,n){var t={message:e};n&&(t.type=n),o(t),setTimeout(function(){return o(null)},5e3)},i=function(e){t(n.filter(function(n){return n.id!==e}))};return u.map(function(e){return r.a.createElement(h,{key:e.name,person:e,deletePerson:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&p(e.id).then(function(){i(e.id),c("Removed ".concat(e.name))}).catch(function(){i(e.id),c("Information of ".concat(e.name," has already been removed from server"),"error")})}(e)}})})},E=function(e){var n=e.notification;if(!n||!n.message)return null;var t="notification";return n.type&&(t+=" ".concat(n.type)),r.a.createElement("div",{className:t},n.message)},N=function(){var e=Object(a.useState)([]),n=Object(c.a)(e,2),t=n[0],o=n[1],u=Object(a.useState)(""),i=Object(c.a)(u,2),l=i[0],s=i[1],f=Object(a.useState)(""),d=Object(c.a)(f,2),p=d[0],h=d[1],N=Object(a.useState)(""),g=Object(c.a)(N,2),j=g[0],O=g[1],y=Object(a.useState)(),k=Object(c.a)(y,2),C=k[0],P=k[1];return Object(a.useEffect)(function(){m().then(function(e){return o(e)})},[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{notification:C}),r.a.createElement(v,{value:j,setValue:O}),r.a.createElement("h2",null,"add a new"),r.a.createElement(b,{persons:t,setPersons:o,newName:l,setNewName:s,newNumber:p,setNewNumber:h,setNotification:P}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(w,{persons:t,setPersons:o,filterValue:j,setNotification:P}))};t(36);u.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.644ae755.chunk.js.map