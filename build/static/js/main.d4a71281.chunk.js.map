{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","newObject","post","id","changedObject","put","delete","Filter","value","setValue","onChange","e","target","personForm","persons","setPersons","newName","setNewName","newNumber","setNewNumber","setNotification","eraseForm","displayMessage","msg","type","notification","message","setTimeout","onSubmit","preventDefault","existingPerson","find","person","name","newPerson","number","errorHandler","error","errorMsg","confirmMsg","window","confirm","personsService","updatedPerson","map","catch","returnedPerson","concat","Person","deletePerson","onClick","Persons","filterValue","personsToShow","filter","toLocaleLowerCase","includes","removePerson","p","key","Notification","className","App","useState","setFilterValue","useEffect","initialPersons","PersonForm","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.d4a71281.chunk.js","sourcesContent":["import axios from 'axios';\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () => (\n  axios\n    .get(baseUrl)\n    .then(response => response.data)\n)\n\nconst create = (newObject) => (\n  axios\n    .post(baseUrl, newObject)\n    .then(response => response.data)\n)\n\nconst update = (id, changedObject) => (\n  axios\n    .put(`${baseUrl}/${id}`, changedObject)\n    .then(response => response.data)\n)\n\nconst destroy = (id) => (\n  axios\n    .delete(`${baseUrl}/${id}`)\n)\n\nexport default { getAll, create, update, destroy }","import React from 'react';\n\nconst Filter =  ({ value, setValue }) => (\n  <div>\n    filter shown with <input value={value} onChange={(e) => setValue(e.target.value)}></input>\n  </div>\n);\n\nexport default Filter;","import React from 'react';\n\nimport personsService from '../services/persons'\n\nconst personForm = ({\n    persons, setPersons,\n    newName, setNewName,\n    newNumber, setNewNumber,\n    setNotification\n  }) => {\n\n  const eraseForm = () => {\n    setNewName('');\n    setNewNumber('');\n  }\n\n  const displayMessage = (msg, type) => {\n    const notification = {\n      message: msg\n    }\n    if (type)\n      notification.type = type\n    setNotification(notification);\n    setTimeout(() => setNotification(null), 5000);\n  }\n\n  const addPerson = (e) => {\n    e.preventDefault();\n    const existingPerson = persons.find(person => person.name === newName);\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n    }\n    const errorHandler = (error) => {\n      const errorMsg = error.response && error.response.data.error;\n      if (errorMsg) {\n        displayMessage(errorMsg, 'error')\n      }\n    }\n    if (existingPerson) {\n      const confirmMsg = `${newName} is already added to phonebook, replace the old number with a new one?`;\n      if (window.confirm(confirmMsg)) {\n        personsService\n          .update(existingPerson.id, newPerson)\n          .then(updatedPerson => {\n            setPersons(persons.map(person =>\n              person.id === updatedPerson.id\n              ? updatedPerson : person\n            ))\n            eraseForm();\n            displayMessage(`Changed number for ${newPerson.name}`);\n          })\n          .catch(errorHandler);\n      }\n    } else {\n      personsService\n      .create(newPerson)\n      .then(returnedPerson => {\n        setPersons(persons.concat(returnedPerson));\n        eraseForm();\n        displayMessage(`Added ${newPerson.name}`);\n      })\n      .catch(errorHandler);\n    }\n  };\n\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name: <input value={newName} onChange={(e) => setNewName(e.target.value)} />\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={(e) => setNewNumber(e.target.value)} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default personForm;","import React from 'react';\n\nconst Person = ({ person, deletePerson }) => (\n  <div>\n    {person.name} {person.number}\n    <button onClick={deletePerson}>\n      delete\n    </button>\n  </div>\n);\n\nexport default Person;","import React from 'react';\n\nimport personsService from '../services/persons';\nimport Person from './Person';\n\nconst Persons = ({ persons, setPersons, filterValue, setNotification }) => {\n  const personsToShow = persons.filter(person => (\n    person.name.toLocaleLowerCase()\n      .includes(filterValue.toLocaleLowerCase())\n  ));\n\n  const displayMessage = (msg, type) => {\n    const notification = {\n      message: msg\n    }\n    if (type)\n      notification.type = type\n    setNotification(notification);\n    setTimeout(() => setNotification(null), 5000);\n  }\n\n  const removePerson = (id) => {\n    setPersons(\n      persons.filter(p => p.id !== id )\n    )\n  }\n\n  const deletePerson = (person) => {\n    if (window.confirm(`Delete ${person.name}?`))\n      personsService\n        .destroy(person.id)\n        .then(() => {\n          removePerson(person.id);\n          displayMessage(`Removed ${person.name}`);\n        })\n        .catch(() => {\n          removePerson(person.id);\n          displayMessage(`Information of ${person.name} has already been removed from server`, 'error');\n        })\n  }\n\n  return personsToShow.map(person =>\n    <Person\n      key={person.name}\n      person={person}\n      deletePerson={() => deletePerson(person)}\n    />\n  )\n};\n\nexport default Persons;","import React from 'react';\n\nconst Notification = ({ notification }) => {\n  if (!notification || !notification.message) {\n    return null;\n  }\n\n  let className = 'notification'\n  if (notification.type)\n    className += ` ${notification.type}`\n  return (\n    <div className={className}>\n      {notification.message}\n    </div>\n  );\n};\n\nexport default Notification;","import React, { useState, useEffect } from 'react';\n\nimport personsService from './services/persons';\nimport Filter from './components/Filter';\nimport PersonForm from './components/PersonForm';\nimport Persons from './components/Persons';\nimport Notification from './components/Notification';\n\nconst App = () => {\n  const [ persons, setPersons] = useState([]);\n  const [ newName, setNewName ] = useState('');\n  const [ newNumber, setNewNumber ] = useState('');\n  const [ filterValue, setFilterValue ] = useState('');\n  const [ notification, setNotification ] = useState();\n\n  useEffect(() => {\n    personsService\n      .getAll()\n      .then(initialPersons => setPersons(initialPersons));\n  }, []);\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification notification={notification} />\n      <Filter value={filterValue} setValue={setFilterValue} />\n      <h2>add a new</h2>\n      <PersonForm\n        persons={persons} setPersons={setPersons}\n        newName={newName} setNewName={setNewName}\n        newNumber={newNumber} setNewNumber={setNewNumber}\n        setNotification={setNotification}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        persons={persons} setPersons={setPersons}\n        filterValue={filterValue}\n        setNotification={setNotification}\n      />\n    </div>\n  )\n}\n\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root')\n)"],"sourceRoot":""}