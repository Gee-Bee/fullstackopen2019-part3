(window.webpackJsonpphonebook=window.webpackJsonpphonebook||[]).push([[0],{14:function(e,n,t){e.exports=t(37)},36:function(e,n,t){},37:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(13),c=t.n(o),u=t(2),i=t(3),l=t.n(i),s="/api/persons",m=function(){return l.a.get(s).then(function(e){return e.data})},f=function(e){return l.a.post(s,e).then(function(e){return e.data})},d=function(e,n){return l.a.put("".concat(s,"/").concat(e),n).then(function(e){return e.data})},p=function(e){return l.a.delete("".concat(s,"/").concat(e))},b=function(e){var n=e.value,t=e.setValue;return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:n,onChange:function(e){return t(e.target.value)}}))},v=function(e){var n=e.persons,t=e.setPersons,a=e.newName,o=e.setNewName,c=e.newNumber,u=e.setNewNumber,i=e.setNotification,l=function(){o(""),u("")},s=function(e,n){var t={message:e};n&&(t.type=n),i(t),setTimeout(function(){return i(null)},5e3)};return r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var r=n.find(function(e){return e.name===a}),o={name:a,number:c},u=function(e){var n=e.response&&e.response.data.error;n&&s(n,"error")};if(r){var i="".concat(a," is already added to phonebook, replace the old number with a new one?");window.confirm(i)&&d(r.id,o).then(function(e){t(n.map(function(n){return n.id===e.id?e:n})),l(),s("Changed number for ".concat(o.name))}).catch(u)}else f(o).then(function(e){t(n.concat(e)),l(),s("Added ".concat(o.name))}).catch(u)}},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:a,onChange:function(e){return o(e.target.value)}})),r.a.createElement("div",null,"number: ",r.a.createElement("input",{value:c,onChange:function(e){return u(e.target.value)}})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},h=function(e){var n=e.person,t=e.deletePerson;return r.a.createElement("div",null,n.name," ",n.number,r.a.createElement("button",{onClick:t},"delete"))},w=function(e){var n=e.persons,t=e.setPersons,a=e.filterValue,o=e.setNotification,c=n.filter(function(e){return e.name.toLocaleLowerCase().includes(a.toLocaleLowerCase())}),u=function(e,n){var t={message:e};n&&(t.type=n),o(t),setTimeout(function(){return o(null)},5e3)},i=function(e){t(n.filter(function(n){return n.id!==e}))};return c.map(function(e){return r.a.createElement(h,{key:e.name,person:e,deletePerson:function(){return function(e){window.confirm("Delete ".concat(e.name,"?"))&&p(e.id).then(function(){i(e.id),u("Removed ".concat(e.name))}).catch(function(){i(e.id),u("Information of ".concat(e.name," has already been removed from server"),"error")})}(e)}})})},E=function(e){var n=e.notification;if(!n||!n.message)return null;var t="notification";return n.type&&(t+=" ".concat(n.type)),r.a.createElement("div",{className:t},n.message)},N=function(){var e=Object(a.useState)([]),n=Object(u.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),i=Object(u.a)(c,2),l=i[0],s=i[1],f=Object(a.useState)(""),d=Object(u.a)(f,2),p=d[0],h=d[1],N=Object(a.useState)(""),g=Object(u.a)(N,2),j=g[0],O=g[1],y=Object(a.useState)(),k=Object(u.a)(y,2),C=k[0],P=k[1];return Object(a.useEffect)(function(){m().then(function(e){return o(e)})},[]),r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(E,{notification:C}),r.a.createElement(b,{value:j,setValue:O}),r.a.createElement("h2",null,"add a new"),r.a.createElement(v,{persons:t,setPersons:o,newName:l,setNewName:s,newNumber:p,setNewNumber:h,setNotification:P}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(w,{persons:t,setPersons:o,filterValue:j,setNotification:P}))};t(36);c.a.render(r.a.createElement(N,null),document.getElementById("root"))}},[[14,1,2]]]);
//# sourceMappingURL=main.d4a71281.chunk.js.map